import{f as e,v as a,ah as l,y as t,z as s,Q as n,I as o,x as i,r,g as c,dI as u,m as d,n as p,a2 as m,T as v,c as x,o as f,a as h,b,B as y,K as g,t as k,i as w,w as C,C as j,J as I,H as $,d as B,F as _,D as T,U as S,G as D,s as U,E as z,aZ as A,dJ as M}from"./CML86CCZ.js";import N from"./BEHy2deV.js";import R from"./B789A1zv.js";import V from"./CRZ6JGmb.js";import{_ as W,a as H,b as J}from"./GgvKmSCE.js";import{s as q}from"./DSXY0Md2.js";import"./cRI-bMi8.js";import"./CXqc0fGY.js";import"./DqMEjhpm.js";import"./B9lkUoID.js";import"./BZ-UuiLS.js";const E={class:"bg-[--secondary-bg] flex-1 w-100% px-200px pt-40px overflow-y-auto bot-manage",style:{height:"calc(100vh - 150px)"}},F={class:"mb-8px flex-between items-center"},G={class:"text-16px font-500"},K={key:0},L={class:"flex-between"},P={class:"text-24px"},Q={key:0,class:"mask text-center color-[--main-text] absolute bg-[--border] top-0 right-0 left-0 bottom-0 flex items-center justify-center z-1 text-14px cursor-pointer"},Z={class:"grid grid-cols-3 gap-2 mt-30px"},O={class:"color-[--third-text] rounded-4px text-10px px-4px py-1px overflow-hidden text-ellipsis whitespace-nowrap max-w-100px line-height-15px absolute left-2px top-2px"},X={class:"text-center mt-30px flex-between"},Y=e({__name:"index",setup(e,{expose:Y}){Y({getMultiWalletsAllChain:je});const{t:ee}=a(),{showImport:ae,mode:le,showBotRecord:te}=l(t()),{theme:se,isDark:ne}=l(s()),oe=n(),ie=o(!1),re=o(!1),ce=o(!0),ue=i("encryptedMnemonic","",sessionStorage),de=o(!1),pe=r([]),me=r([]),ve=o(!1),xe=o(!1),fe=r(0),he=r(!1);let be=null;const ye=c((()=>{var e;const a=ue.value||"",l=(null==(e=null==oe?void 0:oe.userInfo)?void 0:e.tgUid)||"";if(a&&l){return u(a,l).split(" ")||[]}return[]})),ge=c((()=>(null==oe?void 0:oe.evmAddress)||""));function ke(){he.value||(je(),we(10))}d((()=>ge.value),(e=>{e?je():(pe.value=[],me.value=[])})),p((()=>{je(),be&&clearInterval(be)}));const we=e=>{fe.value=e,he.value=!0,be=q((()=>{fe.value--,fe.value<=0&&(clearInterval(be),be=null,he.value=!1)}),1e3)};function Ce(){ve.value=!0,H().then((e=>{me.value=e,te.value=!0})).catch((e=>{m.error(e)})).finally((()=>{ve.value=!1}))}function je(){return new Promise(((e,a)=>{de.value=!0;const l=oe.isSupportChains;W(null==l?void 0:l.join(",")).then((a=>{pe.value=Array.isArray(a)?null==a?void 0:a.map(((e,a)=>{var l,t,s,n,o,i,r,c;return{id:`parent-${a}`,tgUid:e.tgUid,address:e.tgUid,name:e.name,source:e.source,operate:"delete",genSource:e.genSource,evmAddress:(null==(s=null==(t=null==(l=e.balancesInfo)?void 0:l.filter((e=>"bsc"==e.chain)))?void 0:t[0])?void 0:s.address)||"",balance:null==(n=null==e?void 0:e.balancesInfo)?void 0:n.reduce(((e,a)=>e+Number(a.balance)),0),mainTokenBalance:null==(o=null==e?void 0:e.balancesInfo)?void 0:o.reduce(((e,a)=>e+Number(a.mainTokenBalance)),0),usdcTokenBalance:null==(i=null==e?void 0:e.balancesInfo)?void 0:i.reduce(((e,a)=>e+Number(a.usdcTokenBalance)),0),usdtTokenBalance:null==(r=null==e?void 0:e.balancesInfo)?void 0:r.reduce(((e,a)=>e+Number(a.usdtTokenBalance)),0),balancesInfo:null==(c=e.balancesInfo)?void 0:c.map(((e,l)=>({...e,id:`child-${a}-${l}`,name:e.address,operate:"deposit",isChildren:!0})))}})):[],e(pe.value)})).catch((e=>{m.error(e),a([])})).finally((()=>{de.value=!1,xe.value=!1}))}))}function Ie(){ie.value=!0,J().then((e=>{ue.value=null==e?void 0:e.Mnemonic,m.success(ee("success")),ce.value=!0,re.value=!0,$e()})).catch((e=>{m.error(String(e))})).finally((()=>{ie.value=!1}))}function $e(){je()}const Be=()=>{A.confirm(ee("lastChance"),ee("tips"),{type:"warning",icon:M,confirmButtonText:ee("saved"),cancelButtonText:ee("cancel"),customClass:`${le.value} delete_confirm`}).then((()=>{ue.value="",re.value=!1})).catch((e=>{}))};return(e,a)=>{const l=j,t=$,s=z,n=v("copy");return f(),x("div",E,[h("div",F,[h("span",G,k(e.$t("walletList")),1),w(ge)?(f(),x("span",{key:0,class:"text-16px font-500 color-[--third-text] ml-40px cursor-pointer",onClick:Ce},k(e.$t("operateHistory")),1)):y("",!0),a[5]||(a[5]=h("div",{class:"flex-1"},null,-1)),w(ge)?(f(),g(t,{key:1,class:"text-12px",size:"small",onClick:I(ke,["stop","prevent"]),disabled:w(he)},{default:C((()=>[w(fe)>0?(f(),x("span",K,k(w(fe))+"S",1)):(f(),g(l,{key:1,name:"material-symbols:sync-outline",class:"text-12px"}))])),_:1},8,["disabled"])):y("",!0),w(ge)?(f(),g(t,{key:2,class:"text-12px",size:"small",type:"primary",onClick:I(Ie,["stop","prevent"]),loading:w(ie)},{default:C((()=>[b(l,{name:"custom:wallet-fill",class:"text-12px mr-4px"}),B(k(e.$t("createWallet")),1)])),_:1},8,["loading"])):y("",!0),w(ge)?(f(),g(t,{key:3,class:"text-12px",size:"small",onClick:a[0]||(a[0]=I((e=>ae.value=!0),["stop","prevent"]))},{default:C((()=>[b(l,{name:"mingcute:new-folder-fill",class:"text-102x mr-4px"}),B(k(e.$t("importWallet")),1)])),_:1})):y("",!0)]),b(N,{tableData:w(pe),loading:w(de),onRefresh:$e},null,8,["tableData","loading"]),b(R,{onRefresh:$e}),b(V,{tableData:w(me),loading:w(ve)},null,8,["tableData","loading"]),b(s,{modelValue:w(re),"onUpdate:modelValue":a[4]||(a[4]=e=>U(re)?re.value=e:null),width:"500",height:"630",class:D(["dialog-connect1",w(se)]),"append-to-body":"","close-on-click-modal":!1,"show-close":!1},{header:C((()=>[h("div",L,[h("span",P,k(e.$t("mnemonic")),1),b(l,{name:"material-symbols-light:close",class:"text-30px cursor-pointer",onClick:a[1]||(a[1]=I((e=>re.value=!1),["stop","prevent"]))})])])),default:C((()=>{var s;return[h("div",{class:"relative min-h-160px",onClick:a[2]||(a[2]=e=>ce.value=!1)},[w(ce)?(f(),x("div",Q,[b(l,{name:"custom:show-code",class:"text-16px mr-4px color-[--main-text]"}),B(" "+k(e.$t("clickMnemonic")),1)])):y("",!0),h("div",Z,[(f(!0),x(_,null,T(w(ye),((e,a)=>(f(),x("div",{class:"mnemonic-item block border border-solid border-[--dialog-divider] py-8px text-center relative",key:a},[h("span",O,k(a+1),1),B(" "+k(e),1)])))),128))])]),h("div",X,[S((f(),g(t,{class:"flex-1",style:{height:"48px"},onClick:a[3]||(a[3]=I((()=>{}),["stop","prevent"]))},{default:C((()=>[B(k(e.$t("copyMnemonic")),1)])),_:1})),[[n,null==(s=w(ye))?void 0:s.join(" ")]]),b(t,{class:"flex-1",style:{height:"48px"},type:"primary",onClick:I(Be,["stop","prevent"])},{default:C((()=>[B(k(e.$t("continue")),1)])),_:1})])]})),_:1},8,["modelValue","class"])])}}});export{Y as default};
